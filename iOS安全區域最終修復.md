# iOS å®‰å…¨å€åŸŸæœ€çµ‚ä¿®å¾©æ–¹æ¡ˆ

## å•é¡Œåˆ†æ

å¾æ‚¨çš„æˆªåœ–å¯ä»¥çœ‹åˆ°ï¼š
1. âœ… é ‚éƒ¨ç©å®¶è³‡è¨Šè¢« iOS ç‹€æ…‹åˆ—é®æ“‹
2. âœ… åº•éƒ¨ã€Œè‘—æ‰‹ã€æŒ‰éˆ•è¢« iOS åº•éƒ¨å·¥å…·åˆ—é®æ“‹

## æ ¹æœ¬åŸå› 

### å•é¡Œ 1ï¼š100vh åœ¨ iOS Safari çš„å•é¡Œ
```css
/* âŒ å•é¡Œä»£ç¢¼ */
.game-view {
  height: 100vh;  /* iOS Safari æœƒåŒ…å«åœ°å€æ¬„é«˜åº¦ */
}
```

åœ¨ iOS Safari ä¸­ï¼Œ`100vh` åŒ…å«äº†åœ°å€æ¬„çš„é«˜åº¦ï¼Œç•¶åœ°å€æ¬„é¡¯ç¤º/éš±è—æ™‚æœƒå°è‡´ä½ˆå±€è·³å‹•ï¼Œä¸”ä¸æœƒè‡ªå‹•è™•ç†å®‰å…¨å€åŸŸã€‚

### å•é¡Œ 2ï¼šå®‰å…¨å€åŸŸè™•ç†ä½ç½®éŒ¯èª¤
ä¹‹å‰å˜—è©¦åœ¨ `body` å±¤ç´šè™•ç†ï¼Œä½† `game-view` ä½¿ç”¨äº† `100vh`ï¼Œå°è‡´å®‰å…¨å€åŸŸè¢«å¿½ç•¥ã€‚

## æœ€çµ‚è§£æ±ºæ–¹æ¡ˆ âœ…

### 1. ä½¿ç”¨ -webkit-fill-available
```css
html {
  height: 100%;
  height: -webkit-fill-available;  /* iOS Safari å°ˆç”¨ */
}

.game-view {
  min-height: 100vh;
  min-height: -webkit-fill-available;  /* è‡ªå‹•æ‰£é™¤åœ°å€æ¬„ */
}
```

### 2. åœ¨é ‚éƒ¨å’Œåº•éƒ¨å…ƒç´ æ·»åŠ å®‰å…¨å€åŸŸ
```css
.top-bar {
  padding-top: calc(0.5rem + env(safe-area-inset-top));
  flex-shrink: 0;  /* é˜²æ­¢è¢«å£“ç¸® */
}

.bottom-bar {
  padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));
  flex-shrink: 0;  /* é˜²æ­¢è¢«å£“ç¸® */
}
```

### 3. viewport è¨­å®š
```html
<meta name="viewport" content="viewport-fit=cover">
```

## å®Œæ•´çš„ä¿®æ”¹

### frontend/src/style.css
```css
html {
  width: 100%;
  height: 100%;
  height: -webkit-fill-available;  /* â† æ–°å¢ */
  overflow: hidden;
}

body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  margin: 0;
  padding: 0;
  /* ç§»é™¤äº† safe-area-inset padding */
}
```

### frontend/src/views/GameView.vue
```css
.game-view {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  min-height: -webkit-fill-available;  /* â† æ–°å¢ */
  width: 100vw;
  overflow: hidden;
  background: #2c3e50;
  position: relative;
}

.top-bar {
  padding-top: calc(0.5rem + env(safe-area-inset-top));  /* â† ä¿®æ”¹ */
  flex-shrink: 0;  /* â† æ–°å¢ */
}

.bottom-bar {
  padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));  /* â† ä¿®æ”¹ */
  flex-shrink: 0;  /* â† æ–°å¢ */
}
```

## ç‚ºä»€éº¼é€™æ¬¡æœƒæˆåŠŸï¼Ÿ

### 1. -webkit-fill-available
- é€™æ˜¯ iOS Safari å°ˆç”¨çš„å±¬æ€§
- è‡ªå‹•è¨ˆç®—å¯ç”¨é«˜åº¦ï¼ˆæ‰£é™¤åœ°å€æ¬„ã€å·¥å…·åˆ—ï¼‰
- ç•¶åœ°å€æ¬„é¡¯ç¤º/éš±è—æ™‚è‡ªå‹•èª¿æ•´

### 2. calc() å‡½æ•¸
- `calc(0.5rem + env(safe-area-inset-top))` ç¢ºä¿åŸæœ‰ padding + å®‰å…¨å€åŸŸ
- ä¸æœƒè¦†è“‹åŸæœ‰çš„é–“è·è¨­è¨ˆ

### 3. flex-shrink: 0
- é˜²æ­¢é ‚éƒ¨å’Œåº•éƒ¨è¢« flexbox å£“ç¸®
- ç¢ºä¿å®‰å…¨å€åŸŸçš„ padding ä¸æœƒè¢«æ“ æ‰

## è¦–è¦ºæ•ˆæœ

### ä¿®å¾©å¾Œ âœ…
```
iPhone 14 Pro
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”‹ 11:12 ğŸ“¶ 100%  âš«ï¸            â”‚ â† iOS ç‹€æ…‹åˆ—
â”‚                                 â”‚ â† å®‰å…¨å€åŸŸ (47px)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜° [Player1 â—] [Player2 â—‹]      â”‚ â† å®Œæ•´é¡¯ç¤ºï¼
â”‚    0å‹0æ•—0ç„¡   0å‹0æ•—0ç„¡         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     A B C D E F G H I J K L M N Oâ”‚
â”‚  1  â”Œâ”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â” â”‚
â”‚  2  â”œâ”€â”¼â”€â”¼â”€â”¼â”€â”¼â”€â”¼â”€â”¼â”€â”¼â”€â”¼â”€â”¼â”€â”¼â”€â”¼â”€â”¤ â”‚
â”‚     ...                         â”‚
â”‚ 15  â””â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         [ è‘—æ‰‹ ]                â”‚ â† å®Œæ•´é¡¯ç¤ºï¼
â”‚                                 â”‚ â† å®‰å…¨å€åŸŸ (34px)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â—€  â–¶  â¬†  ğŸ“–  â§‰                â”‚ â† iOS å·¥å…·åˆ—
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ¸¬è©¦æ­¥é©Ÿ

### 1. æ¸…é™¤å¿«å–ï¼ˆé‡è¦ï¼ï¼‰
åœ¨ iOS Safari ä¸­ï¼š
1. é•·æŒ‰é‡æ–°æ•´ç†æŒ‰éˆ•
2. é¸æ“‡ã€Œæ¸…é™¤å¿«å–ä¸¦é‡æ–°è¼‰å…¥ã€

æˆ–è€…ï¼š
1. è¨­å®š > Safari > æ¸…é™¤æ­·å²è¨˜éŒ„èˆ‡ç¶²ç«™è³‡æ–™

### 2. æ¸¬è©¦ä¸åŒç‹€æ…‹
- [ ] ç›´å±æ¨¡å¼
- [ ] æ©«å±æ¨¡å¼
- [ ] å‘ä¸Šæ»¾å‹•éš±è—åœ°å€æ¬„
- [ ] å‘ä¸‹æ»¾å‹•é¡¯ç¤ºåœ°å€æ¬„
- [ ] é»æ“Šåœ°å€æ¬„ï¼ˆéµç›¤å½ˆå‡ºï¼‰

### 3. æª¢æŸ¥å…ƒç´ 
åœ¨ Safari é–‹ç™¼è€…å·¥å…·ä¸­ï¼š
```css
.top-bar {
  padding-top: calc(0.5rem + 47px);  /* iPhone 14 Pro */
  /* = 8px + 47px = 55px */
}

.bottom-bar {
  padding-bottom: calc(0.75rem + 34px);  /* iPhone 14 Pro */
  /* = 12px + 34px = 46px */
}
```

## ä¸åŒè¨­å‚™çš„æ•ˆæœ

| è¨­å‚™ | safe-area-inset-top | safe-area-inset-bottom |
|------|---------------------|------------------------|
| iPhone 14 Pro | 47px | 34px |
| iPhone 14 | 47px | 34px |
| iPhone SE | 20px | 0px |
| iPad | 20px | 0px |
| Android | 0px | 0px |
| æ¡Œé¢ | 0px | 0px |

## å¸¸è¦‹å•é¡Œ

### Q: ç‚ºä»€éº¼ä¸ç›´æ¥ç”¨ 100dvhï¼Ÿ
A: `100dvh` (dynamic viewport height) æ˜¯è¼ƒæ–°çš„æ¨™æº–ï¼Œä½† iOS Safari æ”¯æ´åº¦ä¸å¤ å¥½ã€‚`-webkit-fill-available` æ˜¯æ›´å¯é çš„é¸æ“‡ã€‚

### Q: ç‚ºä»€éº¼è¦ç”¨ min-height è€Œä¸æ˜¯ heightï¼Ÿ
A: `min-height` å…è¨±å…§å®¹è¶…å‡ºæ™‚å¯ä»¥æ»¾å‹•ï¼Œ`height` æœƒå¼·åˆ¶å›ºå®šé«˜åº¦ã€‚

### Q: æ¸…é™¤å¿«å–å¾Œé‚„æ˜¯ä¸è¡Œæ€éº¼è¾¦ï¼Ÿ
A: 
1. å®Œå…¨é—œé–‰ Safariï¼ˆå¾å¤šå·¥åˆ‡æ›å™¨æ»‘æ‰ï¼‰
2. é‡æ–°é–‹å•Ÿ Safari
3. æˆ–ä½¿ç”¨ç„¡ç—•æ¨¡å¼æ¸¬è©¦

## æ§‹å»ºæ¸¬è©¦

```bash
pnpm build
# âœ“ built in 530ms
# âœ… æ§‹å»ºæˆåŠŸ
```

## åƒè€ƒè³‡æ–™

- [CSS Tricks - The trick to viewport units on mobile](https://css-tricks.com/the-trick-to-viewport-units-on-mobile/)
- [WebKit - Designing Websites for iPhone X](https://webkit.org/blog/7929/designing-websites-for-iphone-x/)
- [MDN - -webkit-fill-available](https://developer.mozilla.org/en-US/docs/Web/CSS/length#-webkit-fill-available)

